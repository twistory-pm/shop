// === LƯU SẢN PHẨM VÀO GIỎ ===
const addToCartButtons = document.querySelectorAll('.add-to-cart');

addToCartButtons.forEach(button => {
  button.addEventListener('click', () => {
    const product = button.parentElement;
    const id = product.getAttribute('data-id');
    const name = product.getAttribute('data-name');
    const price = parseInt(product.getAttribute('data-price'));

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const existing = cart.find(item => item.id === id);

    if (existing) {
      existing.quantity++;
    } else {
      cart.push({ id, name, price, quantity: 1 });
    }

    localStorage.setItem('cart', JSON.stringify(cart));
    alert(`${name} đã được thêm vào giỏ hàng!`);
  });
});

// === HIỂN THỊ GIỎ HÀNG TRONG cart.html ===
const cartItemsContainer = document.getElementById('cart-items');
const totalDisplay = document.getElementById('total');
const clearButton = document.getElementById('clear-cart');

if (cartItemsContainer) {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];

  if (cart.length === 0) {
    cartItemsContainer.innerHTML = "<p>Giỏ hàng trống.</p>";
  } else {
    cart.forEach(item => {
      const div = document.createElement('div');
      div.classList.add('cart-item');
      div.innerHTML = `
        <p>${item.name} - ${item.quantity} x ${item.price.toLocaleString()}₫</p>
      `;
      cartItemsContainer.appendChild(div);
    });

    const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
    totalDisplay.textContent = "Tổng: " + total.toLocaleString() + "₫";
  }

  clearButton.addEventListener('click', () => {
    localStorage.removeItem('cart');
    location.reload();
  });
}
